$("#cookie_rate_us").attr("href","https://chrome.google.com/webstore/detail/"+chrome.runtime.id+"/reviews"),document.getElementById("cookie_rate_us").textContent=chrome.i18n.getMessage("rateUsLabel"),document.getElementById("whitelist_label").textContent=chrome.i18n.getMessage("optionsWhitelist"),document.getElementById("whitelist_label_per_line").textContent=chrome.i18n.getMessage("optionsWhitelistPerLine"),document.getElementById("save").setAttribute("value",chrome.i18n.getMessage("optionsButton")),document.addEventListener("DOMContentLoaded",(function(){chrome.storage.local.get({settings:{whitelistedDomains:{},statusIndicators:!0}},(({settings:e})=>{document.getElementById("whitelist").value=Object.keys(e.whitelistedDomains).sort().join("\n")}))})),document.getElementById("save").addEventListener("click",(function(){document.getElementsByClassName("cookie_saved_alert")[0].textContent=chrome.i18n.getMessage("saved"),setTimeout((()=>{document.getElementsByClassName("cookie_saved_alert")[0].textContent=""}),3e3);const e=document.getElementById("whitelist").value.split("\n"),t={whitelistedDomains:{}};e.forEach((e=>{(e=e.trim().replace(/^\w*\:?\/+/i,"").replace(/^w{2,3}\d*\./i,"").split("/")[0].split(":")[0]).length>0&&e.length<100&&(t.whitelistedDomains[e]=!0)})),chrome.storage.local.set({settings:t},(()=>{setTimeout((function(){document.getElementById("status_saved").style.display="none"}),2e3),chrome.runtime.sendMessage("update_settings")}))})),document.getElementsByClassName("collapseBtn")[0].addEventListener("click",(function(){$(".collapseBtn").hasClass("collapseBtnOn")?($(".collapseBtn").removeClass("collapseBtnOn"),$(".collapseBtn").addClass("collapseBtnOff"),$(".collapse").collapse("hide"),chrome.runtime.sendMessage({command:"collapse_popup_on"})):($(".collapseBtn").removeClass("collapseBtnOff"),$(".collapseBtn").addClass("collapseBtnOn"),$(".collapse").collapse("show"),chrome.runtime.sendMessage({command:"collapse_popup_off"}))})),chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.runtime.sendMessage({command:"get_active_tab",tabId:e[0].id},(function(e){e.tab.whitelisted?$("#save").css("background","#489FF8"):$("#save").css("background","#66BE99")}))}));